<html>

<head>
	<title>Friend Finder</title>

	<script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	<link rel="stylesheet" href="css/reset.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.min.css">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/js/materialize.min.js"></script>
	<link rel="stylesheet" href="css/style.css">
</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col s12 z-depth-5 mainpanel">
				<div id="mainpanel-content">
					<h1>Survey Questions</h1>
					<div class="divider"></div>

					<h3>Lets be friends</h3>

					<div class="input-field col s6">
						<h5>Name (Required)</h5>
						<i class="material-icons prefix">account_circle</i>
						<input type="text" class="validate" placeholder="Your Name Here" id="userName">
					</div>

					<div class="input-field col s6">
						<h5>Link to Photo Image (Required)</h5>
						<i class="material-icons prefix">picture_in_picture</i>
						<input type="text" class="validate" placeholder="Photo Link Here" id="userPhoto">
					</div>

					<!-- Survey Questions -->
					<div class="input-field col s12">
						<h3>Question 1</h3>
						<h5>You have a bitch resting face</h5>
						<select id="question1">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 2</h3>
						<h5>People think you're working whey you're really just wondering what you're going to eat for lunch</h5>
						<select id="question2">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 3</h3>
						<h5>Your anxiety runs your life.</h5>
						<select id="question3">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 4</h3>
						<h5>You love dogs</h5>
						<select id="question4">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 5</h3>
						<h5>You love cats</h5>
						<select id="question5">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 6</h3>
						<h5>You're a magnet for the over sharer.</h5>
						<select id="question6">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 7</h3>
						<h5>Everything makes you cry</h5>
						<select id="question7">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 8</h3>
						<h5>Summer is your favorite season</h5>
						<select id="question8">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 9</h3>
						<h5>Your idea of comfort food is Pad Thai</h5>
						<select id="question9">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<div class="input-field col s12">
						<h3>Question 10</h3>
						<h5>You would marry candy if you could</h5>
						<select id="question10">
							<option value="" disabled selected>Choose your option</option>
							<option value="1">1 (Strongly Disagree)</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5 (Strongly Agree)</option>
						</select>
					</div>

					<!-- Survey Submit Button -->
					<div>
						<button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit Responses
							<i class="material-icons right">send</i>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal Dialog Displaying Closest Friend Match -->
	<script type="text/javascript">
		$(document).ready(function () {
			$("#submitBtn").on("click", function () {
				//form validation
				function validateForm() {
					var isValid = true;
					$('.validate').each(function () {
						if ($(this).val() === '') {
							isValid = false;
						}
					});
					$('.browser-default').each(function () {
						if ($(this).val() === "") {
							isValid = false;
						}
					});
					return isValid;
				}
				//if everything is filled
				if (validateForm() == true) {
					//creates a new friend from the values submitted
					var newFriend = {
						name: $('#name').val().trim(),
						profilePic: $('#photo').val().trim(),
						scores: [
							$('#q1').val(),
							$('#q2').val(),
							$('#q3').val(),
							$('#q4').val(),
							$('#q5').val(),
							$('#q6').val(),
							$('#q7').val(),
							$('#q8').val(),
							$('#q9').val(),
							$('#q10').val(),
						]
					};
					//Grabs current URL of website
					var currentURL = window.location.origin;
					//AJAX posts the data to friends API.
					$.post(currentURL + "/api/friends", newFriend, function (data) {
						//Grab the result from the AJAX post so that the best match's name and photo are displayed.
						$("#matchName").text(data.name);
						$("#matchPic").attr("src", data.profilePic);
					});
					// Show the modal with the best match
					$('.modal').modal();
					//clear form after submission
					$('#name').val("");
					$('#photo').val("");
					$('#q1').val("");
					$('#q2').val("");
					$('#q3').val("");
					$('#q4').val("");
					$('#q5').val("");
					$('#q6').val("");
					$('#q7').val("");
					$('#q8').val("");
					$('#q9').val("");
					$('#q10').val("");
				} else {
					alert("Not Done")
				}
				// return false;
			});
		});
	</script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
	<title>Friend Finder</title>
</head>

<body>



</body>

</html>


<body>
	<div class="container">
		<div class='card-panel black darken-1 col s12 center-align'>
			<div class='card-panel left-align red'>
				<h1>
					<strong>Lets Go!</strong>
				</h1>
				<br>

				<input id="name" type="text" class="validate" required>
				<label class='active' for="name">Name (required)</label>
				<input id="photo" type="text" class="validate" required>
				<label class='active' for="name">Link to Photo (required)</label>

				<!--Questions-->
				<h3>Question 1</h3>
				<h5>You have a bitch resting face.</h5>
				<select data-placeholder="" class="browser-default" id="q1">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 2</h3>
				<h5>People think you're working but you're really just wondering what you're going to have for lunch.</h5>
				<select data-placeholder="" class="browser-default" id="q2">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 3</h3>
				<h5>Your anxiety runs your life.</h5>
				<select data-placeholder="" class="browser-default" id="q3">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 4</h3>
				<h5>You love dogs.</h5>
				<select data-placeholder="" class="browser-default" id="q4">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 5</h3>
				<h5>You love cats.</h5>
				<select data-placeholder="" class="browser-default" id="q5">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 6</h3>
				<h5>You're a magnet for the over sharer.</h5>
				<select data-placeholder="" class="browser-default" id="q">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 7</h3>
				<h5>Everything makes you cry.</h5>
				<select data-placeholder="" class="browser-default" id="q7">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 8</h3>
				<h5>Summer is your favorite season.</h5>
				<select data-placeholder="" class="browser-default" id="q8">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 9</h3>
				<h5>Your idea of comfort food is Pad Thai.</h5>
				<select data-placeholder="" class="browser-default" id="q9">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>

				<h3>Question 10</h3>
				<h5>You would marry candy if you could.</h5>
				<select data-placeholder="" class="browser-default" id="q10">
					<option value="" disabled selected>Choose your option</option>
					<option value="1">1 (Strongly Disagree)</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5 (Strongly Agree)</option>
				</select>
				<br>

				<!-- Submit -->
				<button type="submit" data-target="modal1" class="waves-effect waves-light btn modal-trigger cyan lighten-1" id="submitBtn">Submit</button>
			</div>
		</div>
		<div class='col s4'>
			<p>
				<a href='/api/friends'>API Friends List</a> |
				<a href='https://github.com/StefanieDing/friend-finder' target='_blank'>GitHub Repo</a>
			</p>
		</div>

		<!-- Modals -->
		<div id="modal1" class="modal">
			<div class="modal-content">
				<h4>Meet Your New BFF</h4>
				<h5 id="matchName"></h5>
				<img id="matchPic" src="" alt="No Image" width=2 50px>
			</div>
			<div class="modal-footer">
				<a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Done</a>
			</div>
		</div>

	</div>

	<!-- send info to server -->
	<script type="text/javascript">
		$(document).ready(function () {
			$("#submitBtn").on("click", function () {
				//form validation
				function validateForm() {
					var isValid = true;
					$('.validate').each(function () {
						if ($(this).val() === '') {
							isValid = false;
						}
					});
					$('.browser-default').each(function () {
						if ($(this).val() === "") {
							isValid = false;
						}
					});
					return isValid;
				}
				//if everything is filled, create new buddy
				if (validateForm() == true) {
					var newFriend = {
						name: $('#name').val().trim(),
						profilePic: $('#photo').val().trim(),
						scores: [
							$('#q1').val(),
							$('#q2').val(),
							$('#q3').val(),
							$('#q4').val(),
							$('#q5').val(),
							$('#q6').val(),
							$('#q7').val(),
							$('#q8').val(),
							$('#q9').val(),
							$('#q10').val(),
						]
					};

					var currentURL = window.location.origin;
					$.post(currentURL + "/api/friends", newFriend, function (data) {
						$("#matchName").text(data.name);
						$("#matchPic").attr("src", data.profilePic);
					});

					$('.modal').modal();
					$('#name').val("");
					$('#photo').val("");
					$('#q1').val("");
					$('#q2').val("");
					$('#q3').val("");
					$('#q4').val("");
					$('#q5').val("");
					$('#q6').val("");
					$('#q7').val("");
					$('#q8').val("");
					$('#q9').val("");
					$('#q10').val("");
				} else {
					alert("Please fill out ALL fields before submitting survey!")
				}

			});
		});
	</script>
</body>

</html>